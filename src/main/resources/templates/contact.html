<!DOCTYPE html>
<html lang="pt-BR" th:replace="~{authenticationLayout :: authenticationLayout (~{:: main})}">
<body>
    <main>

        <h1>Contato</h1>

        <div th:if="${contactRegistered}">
            <p style="text-align: center">
                <i style="color: green">Tentativa de contato realizada com sucesso!</i> <br/>
                Analisaremos seu caso e retornaremos com uma resposta em breve.
            </p>
        </div>

        <form th:unless="${contactRegistered}"
              id="contact-form"
              method="POST"
              th:action="@{/contato}"
              th:object="${contactDTO}">
            <label>
                Assunto:
                <select name="subjectMatter" required>
                    <option value="" selected disabled>-- Selecione --</option>
                    <option value="bug">Reportar Bug</option>
                    <option value="melhoria">Sugestão de melhoria</option>
                    <option value="business">Proposta de negócio</option>
                    <option value="outro">Outro</option>
                </select>
            </label>

            <label>
                Texto:
                <textarea style="resize: none" rows="5" required th:field="*{content}"></textarea>
            </label>

            <button type="submit">Enviar</button>
        </form>

        <section class="contact-attempts">
            <h2 style="text-align: center; font-style: italic">
                Tentativas de contato anteriores:
            </h2>

            <div th:if="${contactAttempts != null}">
                <p th:if="${contactAttempts.isEmpty()}">
                    Nenhuma tentativa de contato foi efetuada até o momento.
                </p>
            </div>

            <div th:each="contact: ${contactAttempts}"
                 th:insert="~{fragments/contact-attempt :: contact-attempt(${contact})}"
                 th:remove="tag"></div>
        </section>

    </main>
</body>
</html>